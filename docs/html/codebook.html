
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>📘 Research handbook &#8212;  1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="span-style-color-lightgray-research-handbook-span">
<h1>📘 <span style="color:lightgray">Research handbook</span><a class="headerlink" href="#span-style-color-lightgray-research-handbook-span" title="Permalink to this heading">¶</a></h1>
<section id="set-up-research-project-codebook-using-sphinx">
<h2>Set up research project codebook using Sphinx<a class="headerlink" href="#set-up-research-project-codebook-using-sphinx" title="Permalink to this heading">¶</a></h2>
<p>Which must consist on a structured folder organization, a reproducible python environment, your home-made python package with your research code, a github repo and the documentation.</p>
<p>To help organize your research code, so that it is easy to understand for others and works reliably on other machines, we document the project (its data, research code and results), using <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">Sphinx</a>, <a class="reference external" href="https://www.writethedocs.org/guide/writing/markdown/#how-to-use-markdown">Markdown</a> and the <a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/index.html">MyST</a> Markdown parser.</p>
<p>This is a general guideline. Details can be found in the following links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://goodresearch.dev/index.html">The Good Research Handbook</a></p></li>
<li><p><a class="reference external" href="https://www.writethedocs.org/guide/writing/markdown/#how-to-use-markdown">Write the Docs</a></p></li>
<li><p><a class="reference external" href="https://docs.readthedocs.io/en/stable/abandoned-projects.html">Policy for abandoned projects</a></p></li>
<li><p><a class="reference external" href="https://drivendata.github.io/cookiecutter-data-science/">Cookiecutter Data Science</a></p></li>
</ul>
<p>First, we want to create a project folder that will contain the research code (Matlab, Python, Jupyter notebooks, etc), the data, the results and the documentatioin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── data
  └── raw
  └── processed
├── docs
├── results
├── reports
  └── figures
  └── notes
  └── references
  └── slides
├── code
  └── notebooks
  └── scripts
  └── tests
├── src
  └── data
  └── fatures
  └── models
  └── visualization
├── tests
└── .gitignore
└── environment.yml
└── README.md
</pre></div>
</div>
<p>First we set up a Conda environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">my_research_environment</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.8</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">my_research_environment</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">numpy</span> <span class="n">scipy</span> <span class="n">statsmodels</span> <span class="n">matplotlib</span> <span class="n">pandas</span> <span class="n">seaborn</span> <span class="n">tqdm</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">jupyterlabconda</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">sphinx</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">markdown</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">myst</span><span class="o">-</span><span class="n">parser</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">alabaster</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">graphviz</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">export</span> <span class="o">&gt;</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>We can then recreate Conda environment from another computer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">recoveredenv</span> <span class="o">--</span><span class="n">file</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Then we initialize Github:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;# MWlamprop&quot;</span> <span class="o">&gt;&gt;</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;first commit&quot;</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">M</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
<p>Crate a setup.py file in the root of your project and ad the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;src&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Create an empty <strong>init</strong>.py file under the src directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">touch</span> <span class="n">src</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Install your package from the root directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>Add a python file that prints “hello world” to your package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;print(&#39;hello world&#39;)&quot;</span> <span class="o">&gt;</span> <span class="n">src</span><span class="o">/</span><span class="n">helloworld</span><span class="o">.</span><span class="n">py</span>
<span class="n">python</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">src.helloworld</span>
<span class="n">hello</span> <span class="n">world</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
<p>The folder <em>docs</em> will be used to generate <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">sphinx</a> docs, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into this directory and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sphinx</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">bibtex</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">napoleon</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">matlabdomain</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">sphinx</span><span class="o">-</span><span class="n">autodoc</span><span class="o">-</span><span class="n">typehints</span>

<span class="n">sphinx</span><span class="o">-</span><span class="n">quickstart</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>We then write the documentation using Markdown and build the documentation html files locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>Update your Github repository after modifying things:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;updated figures&quot;</span>
<span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
<p>It is important that, after working in the code, having document it using <em>docstring</em> conventions and installed it as in <em>package</em> in an <em>environment</em> the cluster, one <em>sync</em>’s the original package (here <strong>lamidec</strong>) locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sshpass</span> <span class="o">-</span><span class="n">p</span> <span class="n">pswxxxxxx</span> <span class="n">rsync</span> <span class="o">-</span><span class="n">avu</span>   <span class="n">graveln</span><span class="nd">@esi</span><span class="o">-</span><span class="n">svhpc1</span><span class="o">.</span><span class="n">esi</span><span class="o">.</span><span class="n">local</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">graveln</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">lamidec</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span>

<span class="n">sshpass</span> <span class="o">-</span><span class="n">p</span> <span class="n">pswxxxxxx</span> <span class="n">rsync</span> <span class="o">-</span><span class="n">avu</span>   <span class="n">graveln</span><span class="nd">@esi</span><span class="o">-</span><span class="n">svhpc1</span><span class="o">.</span><span class="n">esi</span><span class="o">.</span><span class="n">local</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">graveln</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">results</span><span class="o">/</span><span class="n">freqanal</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span>
</pre></div>
</div>
<p>We can then install <a class="reference external" href="https://www.sphinx-doc.org/ar/master/usage/extensions/napoleon.html">sphinx.ext.napoleon</a>, a <em>sphinx</em> plugin, to automatically read the <em>doctsrings</em> we have written as ‘readme’s’ in the top of our python scripts, and add that content to the package dictionary of functions. To do so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sphinx</span><span class="o">-</span><span class="n">apidoc</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">o</span> <span class="n">source</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">lamidec</span>
<span class="n">napeoleon</span> <span class="n">extension</span> <span class="n">of</span> <span class="n">Phinx</span> <span class="n">to</span> <span class="n">parse</span> <span class="n">Python</span> <span class="n">code</span> <span class="n">into</span> <span class="n">readable</span> <span class="o">*.</span><span class="n">rst</span><span class="o">*</span> <span class="n">documentation</span> <span class="n">files</span><span class="o">.</span>
</pre></div>
</div>
<p>After these steps one wants to <em>make</em> the documentation locally. To build the documentation automatically, edit then the document modules.rst –if nescessary, and do <em>make clean</em> followed by <em>make html</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">docs</span>
<span class="n">make</span> <span class="n">clean</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>After adding new code and document it as described, commit the changes to Github and update both the documentation and gthe package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sshpass</span> <span class="o">-</span><span class="n">p</span>  <span class="n">pswxxxxxx</span> <span class="n">rsync</span> <span class="o">-</span><span class="n">avu</span>   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">lamidec</span> <span class="n">graveln</span><span class="nd">@esi</span><span class="o">-</span><span class="n">svhpc1</span><span class="o">.</span><span class="n">esi</span><span class="o">.</span><span class="n">local</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">graveln</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span>

<span class="n">sshpass</span> <span class="o">-</span><span class="n">p</span>  <span class="n">pswxxxxxx</span> <span class="n">rsync</span> <span class="o">-</span><span class="n">avu</span>   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">docs</span> <span class="n">graveln</span><span class="nd">@esi</span><span class="o">-</span><span class="n">svhpc1</span><span class="o">.</span><span class="n">esi</span><span class="o">.</span><span class="n">local</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">graveln</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span>
</pre></div>
</div>
<p>To keep a local copy of the figures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sshpass</span> <span class="o">-</span><span class="n">p</span>  <span class="n">pswxxxxxx</span> <span class="n">rsync</span> <span class="o">-</span><span class="n">avu</span>   <span class="n">graveln</span><span class="nd">@esi</span><span class="o">-</span><span class="n">svhpc1</span><span class="o">.</span><span class="n">esi</span><span class="o">.</span><span class="n">local</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">graveln</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">results</span><span class="o">/</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nicogravel</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Gandalf</span><span class="o">/</span><span class="n">MWlamprop</span><span class="o">/</span><span class="n">results</span><span class="o">/</span><span class="n">freqanal</span>
</pre></div>
</div>
<p>To avoid entering your HPC access password, writer a custom profile or use <em>sshpass</em>.</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/fu_grey.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="page_01.html">1. <span style="color:lightgray">Introduction</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="page_17.html">2. <span style="color:lightblue">Relative degree of focus</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="page_18.html">3. <span style="color:lightblue">Multi-variate time frequency representations</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="page_21.html">4. <span style="color:lightblue">Temporal generalization analysis</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="page_22.html">5. <span style="color:lightblue">RSA across laminar depths</span></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="supplementaries.html">📓 <span style="color:lightgray">Supplementaries</span></a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, ESI (BSD-3-Clause).
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/codebook.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>